{"nodes":{"UsersWithRoles":{"action":"augment","parameters":{"leftKey":["UserRoleId"],"relationship":"Role","rightKey":["Id"],"rightSelect":["Name","DeveloperName","RoleHierarchy","RoleNameHierarchy","ParentRoleId","ParentRole.Name","ParentRole.DeveloperName"]},"sources":["RelevantUsers","UserRolesWithRoleNameHierarchy"]},"RelatedAccountCandidates":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Related_Id","saqlExpression":"Id","type":"Text"},{"name":"Related_Name","saqlExpression":"Name","type":"Text"},{"name":"Related_Type","saqlExpression":"\"Account\"","type":"Text"},{"name":"Related_AccountId","saqlExpression":"Id","type":"Text"}],"mergeWithSource":false},"sources":["Accounts"]},"FreshActivityRelated":{"action":"append","parameters":{},"sources":["FreshLeadsAsActivityRelated","CanonicalCoreEventWhatRelations","CanonicalCoreTaskWhatRelations"]},"Users":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"},{"name":"FirstName"},{"name":"LastName"},{"name":"Email"},{"name":"UserRoleId"},{"name":"UserType"}],"fullRefreshToken":"v1","object":"User","runtime":{"SFDCtoken":"SFDCtoken"}}},"UserRolesWithRoleHierarchy":{"action":"flatten","parameters":{"multiField":{"isSystemField":false,"label":"Role Hierarchy","name":"RoleHierarchy"},"parentField":"ParentRoleId","pathField":{"isSystemField":false,"label":"Role Hierarchy Path","name":"RoleHierarchyPath"},"selfField":"Id"},"sources":["UserRolesWithParentRoleName"]},"FreshActivities":{"action":"append","parameters":{},"sources":["CanonicalCoreEvents","CanonicalCoreTasks"]},"FreshActivitiesPlusUsers":{"action":"augment","parameters":{"leftKey":["Activity_Id"],"operation":"LookupMultiValue","relationship":"Users","rightKey":["ActivityPerson_ActivityId"],"rightSelect":["Person.Person_Id","Person.Person_Name","Roles.Role.Name","Roles.Role.DeveloperName","Roles.Role.ParentRole.Name","Roles.Role.ParentRole.DeveloperName","Roles.Role.RoleHierarchy","Roles.Role.RoleNameHierarchy"]},"sources":["FreshActivitiesPlusAccountName","FreshActivityUserPeopleWithRoles"]},"CanonicalCoreTasks":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Activity_SourceId","saqlExpression":"\"core:tasks\"","type":"Text"},{"name":"Activity_SourceHash","saqlExpression":"\"\"","type":"Text"},{"name":"Activity_Id","saqlExpression":"Id","type":"Text"},{"name":"Activity_Type","saqlExpression":"TaskSubtype","type":"Text"},{"format":"yyyy-MM-dd'T'HH:mm:ss'Z'","name":"Activity_Date","saqlExpression":"toDate('ActivityDate', \"yyyy-MM-dd\")","type":"Date"},{"name":"Activity_AccountId","saqlExpression":"AccountId","type":"Text"}],"mergeWithSource":false},"sources":["CoreTasks"]},"CanonicalCoreTaskWhatRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityRelated_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityRelated_RelatedId","saqlExpression":"WhatId","type":"Text"}],"mergeWithSource":false},"sources":["CoreTasks"]},"FreshActivityUserPeople":{"action":"filter","parameters":{"filter":"Person.Person_Type:EQ:User,Person.Person_Id:N:000000000000000000"},"sources":["FreshActivityPeopleWithDetails"]},"SpareActivityPerson":{"action":"dataset","parameters":{"name":"SpareActivityPerson"}},"FreshActivityPeopleWithDetails":{"action":"augment","parameters":{"leftKey":["ActivityPerson_PersonId"],"relationship":"Person","rightKey":["Person_Id"],"rightSelect":["Person_Id","Person_Type","Person_Name"]},"sources":["FreshActivityPeople","PeopleCandidates"]},"CoreEvents":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"OwnerId"},{"name":"AccountId"},{"name":"WhatId"},{"name":"WhoId"},{"name":"ActivityDate"}],"fullRefreshToken":"v1","object":"Event","passthroughFilter":"ActivityDate = LAST_90_DAYS AND IsChild = false","runtime":{"SFDCtoken":"SFDCtoken"}}},"ContactPeople":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Person_Id","saqlExpression":"Id","type":"Text"},{"name":"Person_Name","saqlExpression":"Name","type":"Text"},{"name":"Person_Type","saqlExpression":"\"Contact\"","type":"Text"},{"name":"Person_EmailAddress","saqlExpression":"Email","type":"Text"},{"name":"Person_AccountId","saqlExpression":"AccountId","type":"Text"}],"mergeWithSource":false},"sources":["Contacts"]},"FreshActivitiesPlusOtherPeople":{"action":"augment","parameters":{"leftKey":["Activity_Id"],"operation":"LookupMultiValue","relationship":"OtherPeople","rightKey":["ActivityPerson_ActivityId"],"rightSelect":["Person.Person_Id","Person.Person_Name","Person.Person_Type"]},"sources":["FreshActivitiesPlusUsers","FreshActivityOtherPeople"]},"UserRolesWithParentRoleName":{"action":"augment","parameters":{"leftKey":["ParentRoleId"],"relationship":"ParentRole","rightKey":["Id"],"rightSelect":["Name","DeveloperName"]},"sources":["UserRoles","UserRoles"]},"PeopleCandidates":{"action":"append","parameters":{},"sources":["SparePerson","ContactPeople","LeadPeople","UserPeople"]},"CanonicalCoreTaskWhoRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityPerson_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityPerson_PersonId","saqlExpression":"WhoId","type":"Text"}],"mergeWithSource":false},"sources":["CoreTasks"]},"UserPeople":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Person_Id","saqlExpression":"Id","type":"Text"},{"name":"Person_Name","saqlExpression":"Name","type":"Text"},{"name":"Person_Type","saqlExpression":"\"User\"","type":"Text"},{"name":"Person_EmailAddress","saqlExpression":"Email","type":"Text"},{"name":"Person_AccountId","saqlExpression":"\"000000000000000000\"","type":"Text"}],"mergeWithSource":false},"sources":["RelevantUsers"]},"CanonicalCoreEventOwnerRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityPerson_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityPerson_PersonId","saqlExpression":"OwnerId","type":"Text"}],"mergeWithSource":false},"sources":["CoreEvents"]},"UserRoles":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"},{"name":"DeveloperName"},{"name":"ParentRoleId"}],"fullRefreshToken":"v1","object":"UserRole","runtime":{"SFDCtoken":"SFDCtoken"}}},"RelevantUsers":{"action":"filter","parameters":{"filter":"UserType:EQ:Standard|PowerPartner"},"sources":["Users"]},"Leads":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"},{"name":"Email"},{"name":"ConvertedAccountId"}],"fullRefreshToken":"v1","object":"Lead","runtime":{"SFDCtoken":"SFDCtoken"}}},"FreshActivityRelatedWithName":{"action":"augment","parameters":{"leftKey":["ActivityRelated_RelatedId"],"relationship":"Related","rightKey":["Related_Id"],"rightSelect":["Related_Id","Related_Name","Related_Type"]},"sources":["FreshActivityRelated","RelatedCandidates"]},"Opportunities":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"},{"name":"CreatedDate"},{"name":"CloseDate"},{"name":"Amount"},{"name":"AccountId"}],"fullRefreshToken":"v1","object":"Opportunity","runtime":{"SFDCtoken":"SFDCtoken"}}},"CanonicalCoreEventWhatRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityRelated_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityRelated_RelatedId","saqlExpression":"WhatId","type":"Text"}],"mergeWithSource":false},"sources":["CoreEvents"]},"RelatedLeadCandidates":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Related_Id","saqlExpression":"Id","type":"Text"},{"name":"Related_Name","saqlExpression":"Name","type":"Text"},{"name":"Related_Type","saqlExpression":"\"Lead\"","type":"Text"},{"defaultValue":"000000000000000000","name":"Related_AccountId","saqlExpression":"ConvertedAccountId","type":"Text"}],"mergeWithSource":false},"sources":["Leads"]},"FreshActivitiesPlusRelated":{"action":"augment","parameters":{"leftKey":["Activity_Id"],"operation":"LookupMultiValue","relationship":"Related","rightKey":["ActivityRelated_ActivityId"],"rightSelect":["Related.Related_Id","Related.Related_Name","Related.Related_Type"]},"sources":["FreshActivitiesPlusOtherPeople","FreshActivityRelatedWithName"]},"RelatedOpportunityCandidates":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Related_Id","saqlExpression":"Id","type":"Text"},{"name":"Related_Name","saqlExpression":"Name","type":"Text"},{"name":"Related_Type","saqlExpression":"\"Opportunity\"","type":"Text"},{"name":"Related_AccountId","saqlExpression":"Name","type":"Text"}],"mergeWithSource":false},"sources":["Opportunities"]},"UserRolesWithRoleNameHierarchy":{"action":"flatten","parameters":{"includeSelfId":true,"multiField":{"isSystemField":false,"label":"Role Name Hierarchy","name":"RoleNameHierarchy"},"parentField":"ParentRole.Name","pathField":{"isSystemField":false,"label":"Role Name Hierarchy Path","name":"RoleNameHierarchyPath"},"selfField":"Name"},"sources":["UserRolesWithRoleHierarchy"]},"CanonicalCoreEventWhoRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityPerson_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityPerson_PersonId","saqlExpression":"WhoId","type":"Text"}],"mergeWithSource":false},"sources":["CoreEvents"]},"FreshActivityLeadPeople":{"action":"filter","parameters":{"filter":"Person.Person_Type:EQ:Lead,Person.Person_Id:N:000000000000000000"},"sources":["FreshActivityPeopleWithDetails"]},"CanonicalCoreEvents":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Activity_SourceId","saqlExpression":"\"core:events\"","type":"Text"},{"name":"Activity_SourceHash","saqlExpression":"\"\"","type":"Text"},{"name":"Activity_Id","saqlExpression":"Id","type":"Text"},{"name":"Activity_Type","saqlExpression":"\"Event\"","type":"Text"},{"format":"yyyy-MM-dd'T'HH:mm:ss'Z'","name":"Activity_Date","saqlExpression":"toDate('ActivityDate', \"yyyy-MM-dd\")","type":"Date"},{"name":"Activity_AccountId","saqlExpression":"AccountId","type":"Text"}],"mergeWithSource":false},"sources":["CoreEvents"]},"RegisteredUsersWithRoles":{"action":"register","parameters":{"label":"Users","name":"UsersWithRoles","runtime":{"SFDCtoken":"SFDCtoken"}},"sources":["UsersWithRoles"]},"FreshActivityOtherPeople":{"action":"filter","parameters":{"filter":"Person.Person_Type:N:User,Person.Person_Id:N:000000000000000000"},"sources":["FreshActivityPeopleWithDetails"]},"Contacts":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"},{"name":"Email"},{"name":"AccountId"}],"fullRefreshToken":"v1","object":"Contact","runtime":{"SFDCtoken":"SFDCtoken"}}},"FreshActivitiesPlusAccountName":{"action":"augment","parameters":{"leftKey":["Activity_AccountId"],"relationship":"Account","rightKey":["Id"],"rightSelect":["Name"]},"sources":["FreshActivities","Accounts"]},"SparePerson":{"action":"dataset","parameters":{"name":"SparePerson"}},"RelatedCandidates":{"action":"append","parameters":{},"sources":["RelatedAccountCandidates","RelatedLeadCandidates","RelatedOpportunityCandidates"]},"FreshActivityUserPeopleWithRoles":{"action":"augment","parameters":{"leftKey":["Person.Person_Id"],"relationship":"Roles","rightKey":["Id"],"rightSelect":["Role.Name","Role.DeveloperName","Role.ParentRole.Name","Role.ParentRole.DeveloperName","Role.RoleHierarchy","Role.RoleNameHierarchy"]},"sources":["FreshActivityUserPeople","UsersWithRoles"]},"CoreTasks":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"OwnerId"},{"name":"AccountId"},{"name":"WhatId"},{"name":"WhoId"},{"name":"ActivityDate"},{"name":"TaskSubtype"}],"fullRefreshToken":"v1","object":"Task","passthroughFilter":"ActivityDate = LAST_90_DAYS","runtime":{"SFDCtoken":"SFDCtoken"}}},"CanonicalCoreTaskOwnerRelations":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityPerson_ActivityId","saqlExpression":"Id","type":"Text"},{"name":"ActivityPerson_PersonId","saqlExpression":"OwnerId","type":"Text"}],"mergeWithSource":false},"sources":["CoreTasks"]},"FreshActivityPeople":{"action":"append","parameters":{},"sources":["SpareActivityPerson","CanonicalCoreEventOwnerRelations","CanonicalCoreTaskOwnerRelations","CanonicalCoreEventWhoRelations","CanonicalCoreTaskWhoRelations"]},"RegisteredActivities":{"action":"register","parameters":{"label":"Activities","name":"Activities","runtime":{"SFDCtoken":"SFDCtoken","description":"Activities"}},"sources":["FreshActivitiesPlusRelated"]},"Accounts":{"action":"sobjectDigest","parameters":{"fields":[{"name":"Id"},{"name":"Name"}],"fullRefreshToken":"v1","object":"Account","runtime":{"SFDCtoken":"SFDCtoken"}}},"LeadPeople":{"action":"computeExpression","parameters":{"computedFields":[{"name":"Person_Id","saqlExpression":"Id","type":"Text"},{"name":"Person_Name","saqlExpression":"Name","type":"Text"},{"name":"Person_Type","saqlExpression":"\"Lead\"","type":"Text"},{"name":"Person_EmailAddress","saqlExpression":"Email","type":"Text"},{"defaultValue":"000000000000000000","name":"Person_AccountId","saqlExpression":"ConvertedAccountId","type":"Text"}],"mergeWithSource":false},"sources":["Leads"]},"FreshLeadsAsActivityRelated":{"action":"computeExpression","parameters":{"computedFields":[{"name":"ActivityRelated_ActivityId","saqlExpression":"ActivityPerson_ActivityId","type":"Text"},{"name":"ActivityRelated_RelatedId","saqlExpression":"ActivityPerson_PersonId","type":"Text"}],"mergeWithSource":false},"sources":["FreshActivityLeadPeople"]}}}